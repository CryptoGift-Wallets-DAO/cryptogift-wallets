# CryptoGift Wallets - Environment Variables (ENHANCED SYSTEM 2025)
# Copy this file to .env.local and fill in your values

# ==================== CORE CONFIGURATION ====================

# Site URLs and Branding (PRODUCTION ENVIRONMENT REQUIRED)
NEXT_PUBLIC_SITE_URL=https://cryptogift-wallets.vercel.app
NEXT_PUBLIC_PRODUCTION_URL=https://cryptogift-wallets.vercel.app
NEXT_PUBLIC_DOCS_URL=https://docs.cryptogift-wallets.vercel.app
NEXT_PUBLIC_BLOG_URL=https://blog.cryptogift-wallets.vercel.app
NEXT_PUBLIC_SUPPORT_URL=https://help.cryptogift-wallets.vercel.app
NEXT_PUBLIC_SUPPORT_EMAIL=support@mbxarts.com

# ThirdWeb Configuration
NEXT_PUBLIC_TW_CLIENT_ID=your_thirdweb_client_id_here
TW_SECRET_KEY=your_thirdweb_secret_key_here

# WalletConnect Configuration (REQUIRED for mobile wallets)
# Get your Project ID from https://cloud.walletconnect.com/
NEXT_PUBLIC_WC_PROJECT_ID=your_walletconnect_project_id_here

# Blockchain Configuration  
NEXT_PUBLIC_RPC_URL=https://base-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
NEXT_PUBLIC_CHAIN_ID=84532
NEXT_PUBLIC_CRYPTOGIFT_NFT_ADDRESS=0xeFCba1D72B8f053d93BA44b7b15a1BeED515C89b
NEXT_PUBLIC_PLAYER_NFT_ADDRESS=0xeFCba1D72B8f053d93BA44b7b15a1BeED515C89b

# ERC-6551 Token Bound Account Configuration
NEXT_PUBLIC_ERC6551_REGISTRY_ADDRESS=0x000000006551c19487814612e58FE06813775758
NEXT_PUBLIC_ERC6551_IMPLEMENTATION_ADDRESS=0x2d25602551487c3f3354dd80d76d54383a243358

# GiftEscrow Contract Configuration
NEXT_PUBLIC_ESCROW_CONTRACT_ADDRESS=0x46175CfC233500DA803841DEef7f2816e7A129E0
ESCROW_CONTRACT_ADDRESS=0x46175CfC233500DA803841DEef7f2816e7A129E0

# DEPRECATED: Use NEXT_PUBLIC_CRYPTOGIFT_NFT_ADDRESS instead
# NEXT_PUBLIC_NFT_DROP_ADDRESS=0xeFCba1D72B8f053d93BA44b7b15a1BeED515C89b

# Deployment
PRIVATE_KEY_DEPLOY=your_wallet_private_key
NEXT_PUBLIC_APP_URL=https://your-domain.vercel.app
NEXT_PUBLIC_BASE_URL=https://your-domain.vercel.app

# ==================== PERSISTENT DATABASE (REQUIRED) ====================

# Vercel KV with Upstash Backend (Current Standard Setup)
# These are automatically set when you connect Upstash via Vercel Marketplace
# Get these from Vercel Dashboard > Settings > Environment Variables after setup
KV_REST_API_URL=https://your-db-name.upstash.io
KV_REST_API_TOKEN=your_kv_token
KV_REST_API_READ_ONLY_TOKEN=your_readonly_token
KV_URL=rediss://default:token@your-db.upstash.io:6379
REDIS_URL=rediss://default:token@your-db.upstash.io:6379

# Alternative Direct Upstash Setup (if not using Vercel KV integration)
# UPSTASH_REDIS_REST_URL=https://your-redis-db.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your_upstash_token

# ==================== GASLESS TRANSACTIONS ====================

# Biconomy Gasless Configuration (SERVER-SIDE ONLY - NEVER EXPOSE TO CLIENT)
BICONOMY_MEE_API_KEY=your_biconomy_mee_api_key
BICONOMY_PROJECT_ID=your_biconomy_project_id
BICONOMY_PAYMASTER_API_KEY=your_biconomy_paymaster_api_key
BICONOMY_PAYMASTER_URL=https://paymaster.biconomy.io/api/v1/84532/your_paymaster_key
BICONOMY_BUNDLER_URL=https://bundler.biconomy.io/api/v2/84532/your_bundler_key

# ==================== IPFS STORAGE (OPTIONAL) ====================

# NFT.Storage (Recommended for development - free, permanent)
# Get your free API key from https://nft.storage/
NFT_STORAGE_API_KEY=your_nft_storage_api_key

# Pinata (For production - professional grade)
PINATA_API_KEY=your_pinata_api_key
PINATA_SECRET_API_KEY=your_pinata_secret_key

# ==================== AI FEATURES (OPTIONAL) ====================

# PhotoRoom AI (Image filtering)
PHOTOROOM_API_KEY=your_photoroom_api_key

# ==================== NOTES ====================
# 
# CRITICAL REQUIREMENTS:
# - Upstash Redis variables are REQUIRED for referral persistence
# - Without Redis, all referral data will be lost on server restart
# - Get Upstash credentials from Vercel Dashboard > Storage > Marketplace > Upstash
# 
# IPFS Strategy:
# - System tries NFT.Storage → Pinata → ThirdWeb → Emergency fallback
# - Works without API keys but better with them
# 
# Real-time Features:
# - Server-Sent Events for live referral updates
# - Auto-fallback to polling if SSE fails
# - Enhanced tracking with wallet address persistence

# ==================== TESTING & DEBUGGING ====================

# Security Tokens (REQUIRED for production)
ADMIN_API_TOKEN=your_secure_admin_token_here
API_ACCESS_TOKEN=your_secure_api_access_token_here
NEXT_PUBLIC_API_ACCESS_TOKEN=your_secure_api_access_token_here

# JWT Configuration (REQUIRED for authentication)
JWT_SECRET=your_strong_jwt_secret_minimum_32_characters_long

# Cron Jobs & Automation (REQUIRED for production)
CRON_SECRET=your_secure_cron_secret_for_automation_endpoints

# Emergency Admin Access (OPTIONAL - for recovery scenarios)
EMERGENCY_ADMIN_KEY=your_emergency_admin_key_for_recovery_only

# Debug Endpoints Configuration
# Set to 'true' to enable debug endpoints in production (requires ADMIN_API_TOKEN)
ENABLE_DEBUG_ENDPOINTS=true

# Disable metadata cache for testing (forces fresh data)
# Set to 'true' to bypass cached metadata and force real-time lookups
# DISABLE_METADATA_CACHE=false

# Enable transaction log recovery (PERFORMANCE WARNING)
# Set to 'true' to enable expensive blockchain transaction log analysis
# WARNING: This can cause 80+ warnings and Alchemy rate limit exhaustion
# ENABLE_TX_LOG_RECOVERY=false

# ==================== SECURITY CONFIGURATION ====================

# Upload Security Limits (protect against abuse)
# Maximum file size for uploads (bytes)
MAX_UPLOAD_SIZE=52428800  # 50MB in bytes

# Maximum file size before compression kicks in (bytes)  
COMPRESSION_THRESHOLD=2097152  # 2MB in bytes

# Image compression quality (0-100, lower = smaller files)
IMAGE_COMPRESSION_QUALITY=80

# Maximum image dimensions after compression (px)
MAX_IMAGE_WIDTH=2048
MAX_IMAGE_HEIGHT=2048

# Allowed MIME types for uploads (comma separated)
ALLOWED_MIME_TYPES=image/jpeg,image/jpg,image/png,image/gif,image/webp

# Allowed IPFS gateway domains (comma separated)
ALLOWED_IPFS_DOMAINS=gateway.thirdweb.com,ipfs.io,cloudflare-ipfs.com,gateway.pinata.cloud,nftstorage.link

# Request timeout for external IPFS fetches (milliseconds)
IPFS_FETCH_TIMEOUT=10000

# Redis connection timeout (milliseconds)
REDIS_TIMEOUT=5000

# Rate limiting configuration
RATE_LIMIT_MAX_REQUESTS=100  # requests per window
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds
